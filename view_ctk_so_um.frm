TYPE=VIEW
query=select `a`.`id_customer` AS `id_customer`,concat((case when isnull(`d`.`first_name`) then \'\' else `d`.`first_name` end),\' \',(case when isnull(`d`.`last_name`) then \'\' else `d`.`last_name` end)) AS `nm_customer`,`d`.`address` AS `address`,`d`.`city` AS `city`,`d`.`phone1` AS `phone1`,`d`.`phone2` AS `phone2`,`d`.`phone3` AS `phone3`,`a`.`no_sales_order` AS `no_sales_order`,`a`.`date_trn` AS `date_trn`,`b`.`id_item` AS `id_item`,`e`.`item_name` AS `item_name`,`b`.`qty` AS `qty`,`b`.`id_unit` AS `id_unit`,`f`.`unit` AS `unit`,(((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) AS `price`,((((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) * `b`.`qty`) AS `nominal`,`a`.`subtotal` AS `subtotal`,`a`.`discount` AS `discount`,`a`.`nett_total` AS `nett_total`,`a`.`tax` AS `tax`,`a`.`total` AS `total`,`a`.`notes` AS `notes`,(case when isnull(`a`.`uang_muka`) then 0 else `a`.`uang_muka` end) AS `uang_muka`,(case when isnull(`a`.`id_curr_um`) then 0 else `a`.`id_curr_um` end) AS `id_curr_um`,(select `ideaccounting_dev`.`mst_company`.`company_name` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_name`,(select `ideaccounting_dev`.`mst_company`.`address` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_address`,(select `ideaccounting_dev`.`mst_company`.`city` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_city`,(case when isnull(concat(`em`.`first_name`,\' \',`em`.`last_name`)) then \'Office\' else concat(`em`.`first_name`,\' \',`em`.`last_name`) end) AS `marketing` from ((((((((`ideaccounting_dev`.`trn_sales_order_head` `a` join `ideaccounting_dev`.`trn_sales_order_det` `b` on((`b`.`no_sales_order` = `a`.`no_sales_order`))) join `ideaccounting_dev`.`mst_customer` `d` on((`d`.`id_customer` = `a`.`id_customer`))) join `ideaccounting_dev`.`mst_item` `e` on((`e`.`id_item` = `b`.`id_item`))) join `ideaccounting_dev`.`mst_unit` `f` on((`f`.`id_unit` = `b`.`id_unit`))) left join `ideaccounting_dev`.`trn_so_discbrand_det` `x` on(((`x`.`no_sales_order` = `b`.`no_sales_order`) and (`x`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`trn_so_disccat_det` `y` on(((`y`.`no_sales_order` = `b`.`no_sales_order`) and (`y`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`trn_so_disctype_det` `z` on(((`z`.`no_sales_order` = `b`.`no_sales_order`) and (`z`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`mst_employee` `em` on((`em`.`id_employee` = `a`.`id_employee`)))
md5=6c1d8462586c20f79f213b9b4218224e
updatable=0
algorithm=0
definer_user=root
definer_host=localhost
suid=1
with_check_option=0
timestamp=2017-02-17 15:32:02
create-version=1
source=select `a`.`id_customer` AS `id_customer`,concat((case when isnull(`d`.`first_name`) then \'\' else `d`.`first_name` end),\' \',(case when isnull(`d`.`last_name`) then \'\' else `d`.`last_name` end)) AS `nm_customer`,`d`.`address` AS `address`,`d`.`city` AS `city`,`d`.`phone1` AS `phone1`,`d`.`phone2` AS `phone2`,`d`.`phone3` AS `phone3`,`a`.`no_sales_order` AS `no_sales_order`,`a`.`date_trn` AS `date_trn`,`b`.`id_item` AS `id_item`,`e`.`item_name` AS `item_name`,`b`.`qty` AS `qty`,`b`.`id_unit` AS `id_unit`,`f`.`unit` AS `unit`,(((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) AS `price`,((((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) * `b`.`qty`) AS `nominal`,`a`.`subtotal` AS `subtotal`,`a`.`discount` AS `discount`,`a`.`nett_total` AS `nett_total`,`a`.`tax` AS `tax`,`a`.`total` AS `total`,`a`.`notes` AS `notes`,(case when isnull(`a`.`uang_muka`) then 0 else `a`.`uang_muka` end) AS `uang_muka`,(case when isnull(`a`.`id_curr_um`) then 0 else `a`.`id_curr_um` end) AS `id_curr_um`,(select `mst_company`.`company_name` from `mst_company` where (`mst_company`.`flag_active` = 1)) AS `company_name`,(select `mst_company`.`address` from `mst_company` where (`mst_company`.`flag_active` = 1)) AS `company_address`,(select `mst_company`.`city` from `mst_company` where (`mst_company`.`flag_active` = 1)) AS `company_city`,(case when isnull(concat(`em`.`first_name`,\' \',`em`.`last_name`)) then \'Office\' else concat(`em`.`first_name`,\' \',`em`.`last_name`) end) AS `marketing` from ((((((((`trn_sales_order_head` `a` join `trn_sales_order_det` `b` on((`b`.`no_sales_order` = `a`.`no_sales_order`))) join `mst_customer` `d` on((`d`.`id_customer` = `a`.`id_customer`))) join `mst_item` `e` on((`e`.`id_item` = `b`.`id_item`))) join `mst_unit` `f` on((`f`.`id_unit` = `b`.`id_unit`))) left join `trn_so_discbrand_det` `x` on(((`x`.`no_sales_order` = `b`.`no_sales_order`) and (`x`.`id_item` = `b`.`id_item`)))) left join `trn_so_disccat_det` `y` on(((`y`.`no_sales_order` = `b`.`no_sales_order`) and (`y`.`id_item` = `b`.`id_item`)))) left join `trn_so_disctype_det` `z` on(((`z`.`no_sales_order` = `b`.`no_sales_order`) and (`z`.`id_item` = `b`.`id_item`)))) left join `mst_employee` `em` on((`em`.`id_employee` = `a`.`id_employee`)))
client_cs_name=utf8
connection_cl_name=utf8_general_ci
view_body_utf8=select `a`.`id_customer` AS `id_customer`,concat((case when isnull(`d`.`first_name`) then \'\' else `d`.`first_name` end),\' \',(case when isnull(`d`.`last_name`) then \'\' else `d`.`last_name` end)) AS `nm_customer`,`d`.`address` AS `address`,`d`.`city` AS `city`,`d`.`phone1` AS `phone1`,`d`.`phone2` AS `phone2`,`d`.`phone3` AS `phone3`,`a`.`no_sales_order` AS `no_sales_order`,`a`.`date_trn` AS `date_trn`,`b`.`id_item` AS `id_item`,`e`.`item_name` AS `item_name`,`b`.`qty` AS `qty`,`b`.`id_unit` AS `id_unit`,`f`.`unit` AS `unit`,(((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) AS `price`,((((`b`.`price` - ((case when isnull(`x`.`nom_disc`) then 0 else `x`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`y`.`nom_disc`) then 0 else `y`.`nom_disc` end) / `b`.`qty`)) - ((case when isnull(`z`.`nom_disc`) then 0 else `z`.`nom_disc` end) / `b`.`qty`)) * `b`.`qty`) AS `nominal`,`a`.`subtotal` AS `subtotal`,`a`.`discount` AS `discount`,`a`.`nett_total` AS `nett_total`,`a`.`tax` AS `tax`,`a`.`total` AS `total`,`a`.`notes` AS `notes`,(case when isnull(`a`.`uang_muka`) then 0 else `a`.`uang_muka` end) AS `uang_muka`,(case when isnull(`a`.`id_curr_um`) then 0 else `a`.`id_curr_um` end) AS `id_curr_um`,(select `ideaccounting_dev`.`mst_company`.`company_name` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_name`,(select `ideaccounting_dev`.`mst_company`.`address` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_address`,(select `ideaccounting_dev`.`mst_company`.`city` from `ideaccounting_dev`.`mst_company` where (`ideaccounting_dev`.`mst_company`.`flag_active` = 1)) AS `company_city`,(case when isnull(concat(`em`.`first_name`,\' \',`em`.`last_name`)) then \'Office\' else concat(`em`.`first_name`,\' \',`em`.`last_name`) end) AS `marketing` from ((((((((`ideaccounting_dev`.`trn_sales_order_head` `a` join `ideaccounting_dev`.`trn_sales_order_det` `b` on((`b`.`no_sales_order` = `a`.`no_sales_order`))) join `ideaccounting_dev`.`mst_customer` `d` on((`d`.`id_customer` = `a`.`id_customer`))) join `ideaccounting_dev`.`mst_item` `e` on((`e`.`id_item` = `b`.`id_item`))) join `ideaccounting_dev`.`mst_unit` `f` on((`f`.`id_unit` = `b`.`id_unit`))) left join `ideaccounting_dev`.`trn_so_discbrand_det` `x` on(((`x`.`no_sales_order` = `b`.`no_sales_order`) and (`x`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`trn_so_disccat_det` `y` on(((`y`.`no_sales_order` = `b`.`no_sales_order`) and (`y`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`trn_so_disctype_det` `z` on(((`z`.`no_sales_order` = `b`.`no_sales_order`) and (`z`.`id_item` = `b`.`id_item`)))) left join `ideaccounting_dev`.`mst_employee` `em` on((`em`.`id_employee` = `a`.`id_employee`)))
